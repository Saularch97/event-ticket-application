meta {
  name: Create Event
  type: http
  seq: 1
}

post {
  url: http://localhost:8081/booking/api/events
  body: json
  auth: inherit
}

body:json {
  {
    "eventName": "Evento de oipoque",
    "eventDate": "22/08/2025",
    "eventHour": 22,
    "eventMinute": 45,
    "eventLocation": "Alfenas",
    "eventPrice": 20000.99,
    "ticketCategories" :[
      {
        "name" : "Pista Paia",
        "price": 150.0,
        "availableCategoryTickets": 300
      },
      {
        "name" : "Pista Pika",
        "price": 333.0,
        "availableCategoryTickets": 150
      }
    ]
  }
  
}

vars:post-response {
  eventId: res.body.eventId
}

script:pre-request {
  const cookie = bru.getVar("cookie");
  
  if(cookie) {
    req.setHeader("Cookie", cookie)
  }
}
